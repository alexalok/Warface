using System.Collections.Generic;
using System.Linq;
using System.Reflection;
using HtmlAgilityPack;
using Warface.Entities.Sessions;
using Xunit;

namespace Warface.Entities.Tests
{
    public class BroadcastSessionResult_Tests
    {
        [Theory]
        [MemberData(nameof(GetBroadcastSessionNodes))]
        void BroadcastSessionResult_ParseNode(HtmlNode broadcastSessionNode)
        {
            BroadcastSessionResult.ParseNode(broadcastSessionNode);
        }

        [Theory]
        [MemberData(nameof(GetBroadcastSessionNodeAndExpectedObject))]
        void BroadcastSessionResult_ParseNode_CheckFields(HtmlNode broadcastSessionNode, BroadcastSessionResult expectedBroadcast)
        {
            var actualBroadcast = BroadcastSessionResult.ParseNode(broadcastSessionNode);
            for (var i = 0; i < expectedBroadcast.PlayerResults.Count; i++)
            {
                var expectedPlayer = expectedBroadcast.PlayerResults[i];
                var actualPlayer = actualBroadcast.PlayerResults[i];

                var props = expectedPlayer.GetType().GetProperties(BindingFlags.Instance | BindingFlags.Public);
                foreach (var propertyInfo in props)
                {
                    var expectedValue = propertyInfo.GetValue(expectedPlayer);
                    var actualValue = propertyInfo.GetValue(actualPlayer);
                    Assert.Equal(expectedValue, actualValue);
                }
            }
        }

        #region Data

        public static IEnumerable<object[]> GetBroadcastSessionNodes()
        {
            var node1 = HtmlNode.CreateNode("<broadcast_session_result bcast_receivers='415943875@warface/GameClient,673064529@warface/GameClient,130954002@warface/GameClient,213601447@warface/GameClient,212517822@warface/GameClient,676695911@warface/GameClient,682734143@warface/GameClient,263831027@warface/GameClient,259942698@warface/GameClient,309279601@warface/GameClient,348234928@warface/GameClient,681133359@warface/GameClient,121665537@warface/GameClient,13872189@warface/GameClient,125480849@warface/GameClient,684172791@warface/GameClient'><player_result nickname='..каштыр..' experience='0' money='338' gained_crown_money='0' no_crown_rewards='1' sponsor_points='0' clan_points='38' bonus_experience='0' bonus_money='0' bonus_sponsor_points='0' experience_boost='444' money_boost='160' sponsor_points_boost='0' experience_boost_percent='1.15' money_boost_percent='0.9' sponsor_points_boost_percent='0.65' completed_stages='0' is_vip='1' score='1310' first_win='0' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='13143324' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,zombiehard,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,volcanosurvival,anubiseasy,anubisnormal,anubishard,zombietowereasy,zombietowernormal,zombietowerhard,icebreakereasy,icebreakernormal,icebreakerhard,anubiseasy2,anubisnormal2,anubishard2,chernobyleasy,chernobylnormal,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='-ТВАРььь-' experience='453' money='209' gained_crown_money='0' no_crown_rewards='1' sponsor_points='348' clan_points='39' bonus_experience='0' bonus_money='0' bonus_sponsor_points='0' experience_boost='59' money_boost='27' sponsor_points_boost='45' experience_boost_percent='0.15' money_boost_percent='0.15' sponsor_points_boost_percent='0.15' completed_stages='0' is_vip='0' score='1695' first_win='0' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='24075535' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,volcanosurvival,anubiseasy,anubisnormal,anubishard,zombietowereasy,zombietowernormal,icebreakereasy,icebreakernormal,anubiseasy2,anubisnormal2,chernobyleasy,chernobylnormal,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='Василь007' experience='849' money='346' gained_crown_money='0' no_crown_rewards='1' sponsor_points='502' clan_points='39' bonus_experience='0' bonus_money='0' bonus_sponsor_points='0' experience_boost='454' money_boost='164' sponsor_points_boost='198' experience_boost_percent='1.15' money_boost_percent='0.9' sponsor_points_boost_percent='0.65' completed_stages='0' is_vip='1' score='1808' first_win='0' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='1324551' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,volcanosurvival,anubiseasy,anubisnormal,anubishard,zombietowereasy,zombietowernormal,zombietowerhard,icebreakereasy,icebreakernormal,anubiseasy2,anubisnormal2,anubishard2,chernobyleasy,chernobylnormal,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='СумашедшийТруп' experience='864' money='351' gained_crown_money='0' no_crown_rewards='1' sponsor_points='510' clan_points='40' bonus_experience='0' bonus_money='0' bonus_sponsor_points='0' experience_boost='462' money_boost='166' sponsor_points_boost='201' experience_boost_percent='1.15' money_boost_percent='0.9' sponsor_points_boost_percent='0.65' completed_stages='0' is_vip='1' score='2145' first_win='0' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='2650009' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,anubiseasy,anubisnormal,zombietowereasy,zombietowernormal,icebreakereasy,icebreakernormal,anubiseasy2,anubisnormal2,anubishard2,chernobyleasy,chernobylnormal,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='БЕН8811' experience='916' money='374' gained_crown_money='0' no_crown_rewards='1' sponsor_points='541' clan_points='42' bonus_experience='0' bonus_money='0' bonus_sponsor_points='0' experience_boost='490' money_boost='177' sponsor_points_boost='213' experience_boost_percent='1.15' money_boost_percent='0.9' sponsor_points_boost_percent='0.65' completed_stages='0' is_vip='1' score='3590' first_win='0' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='2643622' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,zombiehard,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,volcanosurvival,anubiseasy,anubisnormal,anubishard,zombietowereasy,zombietowernormal,zombietowerhard,icebreakereasy,icebreakernormal,icebreakerhard,anubiseasy2,anubisnormal2,anubishard2,chernobyleasy,chernobylnormal,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='-Вкусный.' experience='922' money='376' gained_crown_money='0' no_crown_rewards='1' sponsor_points='495' clan_points='42' bonus_experience='0' bonus_money='0' bonus_sponsor_points='0' experience_boost='493' money_boost='178' sponsor_points_boost='165' experience_boost_percent='1.15' money_boost_percent='0.9' sponsor_points_boost_percent='0.5' completed_stages='0' is_vip='1' score='3725' first_win='0' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='24319547' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,volcanosurvival,anubiseasy,anubisnormal,anubishard,zombietowereasy,zombietowernormal,zombietowerhard,icebreakereasy,icebreakernormal,anubiseasy2,anubisnormal2,chernobyleasy,chernobylnormal,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='_-голодный_-2004' experience='933' money='380' gained_crown_money='0' no_crown_rewards='1' sponsor_points='551' clan_points='43' bonus_experience='0' bonus_money='0' bonus_sponsor_points='0' experience_boost='499' money_boost='180' sponsor_points_boost='217' experience_boost_percent='1.15' money_boost_percent='0.9' sponsor_points_boost_percent='0.65' completed_stages='0' is_vip='1' score='4025' first_win='0' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='24802874' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,volcanosurvival,anubiseasy,anubisnormal,zombietowereasy,zombietowernormal,zombietowerhard,icebreakereasy,icebreakernormal,icebreakerhard,anubiseasy2,anubisnormal2,anubishard2,chernobyleasy,chernobylnormal,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='-прокурор_-' experience='0' money='399' gained_crown_money='0' no_crown_rewards='1' sponsor_points='0' clan_points='45' bonus_experience='0' bonus_money='0' bonus_sponsor_points='0' experience_boost='523' money_boost='189' sponsor_points_boost='0' experience_boost_percent='1.15' money_boost_percent='0.9' sponsor_points_boost_percent='0.65' completed_stages='0' is_vip='1' score='5135' first_win='0' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='4782941' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,zombiehard,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,volcanosurvival,anubiseasy,anubisnormal,anubishard,zombietowereasy,zombietowernormal,zombietowerhard,icebreakereasy,icebreakernormal,icebreakerhard,anubiseasy2,anubisnormal2,anubishard2,chernobyleasy,chernobylnormal,chernobylhard,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='ЛицеистФтш' experience='1449' money='668' gained_crown_money='0' no_crown_rewards='1' sponsor_points='1114' clan_points='126' bonus_experience='897' bonus_money='414' bonus_sponsor_points='690' experience_boost='189' money_boost='87' sponsor_points_boost='145' experience_boost_percent='0.15' money_boost_percent='0.15' sponsor_points_boost_percent='0.15' completed_stages='0' is_vip='0' score='1420' first_win='1' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='9318966' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,zombiehard,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,volcanosurvival,anubiseasy,anubisnormal,anubishard,zombietowereasy,zombietowernormal,zombietowerhard,icebreakereasy,icebreakernormal,icebreakerhard,anubiseasy2,anubisnormal2,anubishard2,chernobyleasy,chernobylnormal,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='___Гонгер___' experience='2718' money='1108' gained_crown_money='0' no_crown_rewards='1' sponsor_points='1604' clan_points='126' bonus_experience='1677' bonus_money='684' bonus_sponsor_points='990' experience_boost='1454' money_boost='525' sponsor_points_boost='632' experience_boost_percent='1.15' money_boost_percent='0.9' sponsor_points_boost_percent='0.65' completed_stages='0' is_vip='1' score='1620' first_win='1' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='8030773' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,zombiehard,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,volcanosurvival,anubiseasy,anubisnormal,anubishard,zombietowereasy,zombietowernormal,zombietowerhard,icebreakereasy,icebreakernormal,icebreakerhard,anubiseasy2,anubisnormal2,chernobyleasy,chernobylnormal,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='ЗаНозычЪ' experience='5048' money='2094' gained_crown_money='0' no_crown_rewards='1' sponsor_points='2900' clan_points='127' bonus_experience='3081' bonus_money='1278' bonus_sponsor_points='1770' experience_boost='3770' money_boost='1504' sponsor_points_boost='1917' experience_boost_percent='2.95' money_boost_percent='2.55' sponsor_points_boost_percent='1.95' completed_stages='0' is_vip='1' score='2460' first_win='1' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='9910455' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,zombiehard,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,volcanosurvival,anubiseasy,anubisnormal,anubishard,zombietowereasy,zombietowernormal,zombietowerhard,icebreakereasy,icebreakernormal,anubiseasy2,anubisnormal2,chernobyleasy,chernobylnormal,chernobylhard,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='Мр_ГРАДУС' experience='2750' money='1121' gained_crown_money='0' no_crown_rewards='1' sponsor_points='1624' clan_points='127' bonus_experience='1677' bonus_money='684' bonus_sponsor_points='990' experience_boost='1471' money_boost='531' sponsor_points_boost='640' experience_boost_percent='1.15' money_boost_percent='0.9' sponsor_points_boost_percent='0.65' completed_stages='0' is_vip='1' score='2540' first_win='1' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='24669499' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,volcanosurvival,anubiseasy,anubisnormal,anubishard,zombietowereasy,zombietowernormal,zombietowerhard,icebreakereasy,icebreakernormal,icebreakerhard,anubiseasy2,anubisnormal2,anubishard2,chernobyleasy,chernobylnormal,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='Кошмар' experience='2793' money='1138' gained_crown_money='0' no_crown_rewards='1' sponsor_points='1648' clan_points='129' bonus_experience='1677' bonus_money='684' bonus_sponsor_points='990' experience_boost='1494' money_boost='539' sponsor_points_boost='649' experience_boost_percent='1.15' money_boost_percent='0.9' sponsor_points_boost_percent='0.65' completed_stages='0' is_vip='1' score='3595' first_win='1' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='22399' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,zombiehard,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,volcanosurvival,anubiseasy,anubisnormal,anubishard,zombietowereasy,zombietowernormal,icebreakereasy,icebreakernormal,anubiseasy2,anubisnormal2,chernobyleasy,chernobylnormal,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='Закин' experience='1303' money='601' gained_crown_money='0' no_crown_rewards='1' sponsor_points='1002' clan_points='130' bonus_experience='780' bonus_money='360' bonus_sponsor_points='600' experience_boost='0' money_boost='0' sponsor_points_boost='0' experience_boost_percent='0' money_boost_percent='0' sponsor_points_boost_percent='0' completed_stages='0' is_vip='0' score='3820' first_win='1' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='3820' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,zombiehard,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,anubiseasy,anubisnormal,zombietowereasy,zombietowernormal,icebreakereasy,icebreakernormal,anubiseasy2,anubisnormal2,chernobyleasy,chernobylnormal,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='.К.И.Н.Г.' experience='0' money='1146' gained_crown_money='0' no_crown_rewards='1' sponsor_points='0' clan_points='130' bonus_experience='1677' bonus_money='684' bonus_sponsor_points='990' experience_boost='1502' money_boost='543' sponsor_points_boost='0' experience_boost_percent='1.15' money_boost_percent='0.9' sponsor_points_boost_percent='0.65' completed_stages='0' is_vip='1' score='4075' first_win='1' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='490936' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,zombiehard,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,volcanosurvival,anubiseasy,anubisnormal,anubishard,zombietowereasy,zombietowernormal,zombietowerhard,icebreakereasy,icebreakernormal,icebreakerhard,anubiseasy2,anubisnormal2,anubishard2,chernobyleasy,chernobylnormal,chernobylhard,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='_кофе__' experience='2823' money='1151' gained_crown_money='0' no_crown_rewards='1' sponsor_points='1666' clan_points='131' bonus_experience='1677' bonus_money='684' bonus_sponsor_points='990' experience_boost='1510' money_boost='545' sponsor_points_boost='656' experience_boost_percent='1.15' money_boost_percent='0.9' sponsor_points_boost_percent='0.65' completed_stages='0' is_vip='1' score='4445' first_win='1' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='24930899' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,volcanosurvival,anubiseasy,anubisnormal,anubishard,zombietowereasy,zombietowernormal,icebreakereasy,icebreakernormal,icebreakerhard,anubiseasy2,anubisnormal2,anubishard2,chernobyleasy,chernobylnormal,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='6' class_unlocked='29'></profile_progression_update></player_result></broadcast_session_result>");

            yield return new[] {node1};

            var node2 = HtmlNode.CreateNode("<broadcast_session_result bcast_receivers='653913086@warface/GameClient,590171390@warface/GameClient,402520996@warface/GameClient,663389456@warface/GameClient,680697478@warface/GameClient,511387818@warface/GameClient,664774780@warface/GameClient,121665537@warface/GameClient,631444120@warface/GameClient,127910478@warface/GameClient,288271436@warface/GameClient,664167937@warface/GameClient,619438187@warface/GameClient,613796896@warface/GameClient,661978121@warface/GameClient'><player_result nickname='-_-п....п-_-' experience='1978' money='807' gained_crown_money='0' no_crown_rewards='1' sponsor_points='1168' clan_points='92' bonus_experience='1565' bonus_money='638' bonus_sponsor_points='924' experience_boost='1058' money_boost='382' sponsor_points_boost='460' experience_boost_percent='1.15' money_boost_percent='0.9' sponsor_points_boost_percent='0.65' completed_stages='0' is_vip='1' score='900' first_win='1' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='23575671' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,volcanosurvival,anubiseasy,anubisnormal,zombietowereasy,zombietowernormal,icebreakereasy,icebreakernormal,anubiseasy2,anubisnormal2,chernobyleasy,chernobylnormal,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='-Костян-123-' experience='2002' money='817' gained_crown_money='0' no_crown_rewards='1' sponsor_points='1181' clan_points='93' bonus_experience='1565' bonus_money='638' bonus_sponsor_points='924' experience_boost='1071' money_boost='387' sponsor_points_boost='465' experience_boost_percent='1.15' money_boost_percent='0.9' sponsor_points_boost_percent='0.65' completed_stages='0' is_vip='1' score='1225' first_win='1' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='20838206' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,anubiseasy,anubisnormal,zombietowereasy,zombietowernormal,icebreakereasy,icebreakernormal,anubiseasy2,anubisnormal2,chernobyleasy,chernobylnormal,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='РонингХп' experience='0' money='747' gained_crown_money='0' no_crown_rewards='1' sponsor_points='1081' clan_points='85' bonus_experience='1565' bonus_money='638' bonus_sponsor_points='924' experience_boost='979' money_boost='354' sponsor_points_boost='426' experience_boost_percent='1.15' money_boost_percent='0.9' sponsor_points_boost_percent='0.65' completed_stages='0' is_vip='1' score='1925' first_win='1' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='12312005' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,zombiehard,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,volcanosurvival,anubiseasy,anubisnormal,anubishard,zombietowereasy,zombietowernormal,zombietowerhard,icebreakereasy,icebreakernormal,icebreakerhard,anubiseasy2,anubisnormal2,anubishard2,chernobyleasy,chernobylnormal,chernobylhard,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='Дади_БОРЗ' experience='2062' money='842' gained_crown_money='0' no_crown_rewards='1' sponsor_points='1218' clan_points='95' bonus_experience='1565' bonus_money='638' bonus_sponsor_points='924' experience_boost='1103' money_boost='399' sponsor_points_boost='480' experience_boost_percent='1.15' money_boost_percent='0.9' sponsor_points_boost_percent='0.65' completed_stages='0' is_vip='1' score='2125' first_win='1' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='23356650' mission_unlocked='none,trainingmission,easymission,normalmission,survivalmission,zombieeasy,zombienormal,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,volcanosurvival,anubiseasy,anubisnormal,anubishard,zombietowereasy,zombietowernormal,icebreakereasy,icebreakernormal,anubiseasy2,anubisnormal2,chernobyleasy,chernobylnormal,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='.Шифрую' experience='2070' money='845' gained_crown_money='0' no_crown_rewards='1' sponsor_points='1223' clan_points='96' bonus_experience='1565' bonus_money='638' bonus_sponsor_points='924' experience_boost='1107' money_boost='400' sponsor_points_boost='482' experience_boost_percent='1.15' money_boost_percent='0.9' sponsor_points_boost_percent='0.65' completed_stages='0' is_vip='1' score='2250' first_win='1' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='24631152' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,volcanosurvival,anubiseasy,anubisnormal,anubishard,zombietowereasy,zombietowernormal,zombietowerhard,icebreakereasy,icebreakernormal,anubiseasy2,anubisnormal2,chernobyleasy,chernobylnormal,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='князь_тыква95' experience='2094' money='853' gained_crown_money='0' no_crown_rewards='1' sponsor_points='1236' clan_points='97' bonus_experience='1565' bonus_money='638' bonus_sponsor_points='924' experience_boost='1120' money_boost='404' sponsor_points_boost='487' experience_boost_percent='1.15' money_boost_percent='0.9' sponsor_points_boost_percent='0.65' completed_stages='0' is_vip='1' score='2550' first_win='1' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='16234524' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,zombiehard,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,volcanosurvival,anubiseasy,anubisnormal,anubishard,zombietowereasy,zombietowernormal,icebreakereasy,icebreakernormal,anubiseasy2,anubisnormal2,chernobyleasy,chernobylnormal,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='джаггернаут_775' experience='529' money='215' gained_crown_money='0' no_crown_rewards='1' sponsor_points='312' clan_points='24' bonus_experience='0' bonus_money='0' bonus_sponsor_points='0' experience_boost='283' money_boost='102' sponsor_points_boost='123' experience_boost_percent='1.15' money_boost_percent='0.9' sponsor_points_boost_percent='0.65' completed_stages='0' is_vip='1' score='2550' first_win='0' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='23464277' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,anubiseasy,anubisnormal,anubishard,zombietowereasy,zombietowernormal,zombietowerhard,icebreakereasy,icebreakernormal,anubiseasy2,anubisnormal2,chernobyleasy,chernobylnormal,chernobylhard,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='Кошмар' experience='2098' money='857' gained_crown_money='0' no_crown_rewards='1' sponsor_points='1239' clan_points='97' bonus_experience='1565' bonus_money='638' bonus_sponsor_points='924' experience_boost='1122' money_boost='406' sponsor_points_boost='488' experience_boost_percent='1.15' money_boost_percent='0.9' sponsor_points_boost_percent='0.65' completed_stages='0' is_vip='1' score='2650' first_win='1' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='22399' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,zombiehard,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,volcanosurvival,anubiseasy,anubisnormal,anubishard,zombietowereasy,zombietowernormal,icebreakereasy,icebreakernormal,anubiseasy2,anubisnormal2,chernobyleasy,chernobylnormal,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='ДРАЙВИК' experience='2103' money='857' gained_crown_money='0' no_crown_rewards='1' sponsor_points='1241' clan_points='97' bonus_experience='1565' bonus_money='638' bonus_sponsor_points='924' experience_boost='1125' money_boost='406' sponsor_points_boost='489' experience_boost_percent='1.15' money_boost_percent='0.9' sponsor_points_boost_percent='0.65' completed_stages='0' is_vip='1' score='2700' first_win='1' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='20641932' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,zombiehard,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,volcanosurvival,anubiseasy,anubisnormal,anubishard,zombietowereasy,zombietowernormal,zombietowerhard,icebreakereasy,icebreakernormal,anubiseasy2,anubisnormal2,anubishard2,chernobyleasy,chernobylnormal,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='Р.О.Я.Л.О' experience='289' money='116' gained_crown_money='0' no_crown_rewards='1' sponsor_points='193' clan_points='25' bonus_experience='0' bonus_money='0' bonus_sponsor_points='0' experience_boost='38' money_boost='0' sponsor_points_boost='0' experience_boost_percent='0.15' money_boost_percent='0' sponsor_points_boost_percent='0' completed_stages='0' is_vip='0' score='2750' first_win='0' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='897435' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,volcanosurvival,anubiseasy,anubisnormal,anubishard,zombietowereasy,zombietowernormal,icebreakereasy,icebreakernormal,anubiseasy2,anubisnormal2,chernobyleasy,chernobylnormal,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='КОНАН_1999' experience='548' money='224' gained_crown_money='0' no_crown_rewards='1' sponsor_points='323' clan_points='25' bonus_experience='0' bonus_money='0' bonus_sponsor_points='0' experience_boost='293' money_boost='106' sponsor_points_boost='127' experience_boost_percent='1.15' money_boost_percent='0.9' sponsor_points_boost_percent='0.65' completed_stages='0' is_vip='1' score='2850' first_win='0' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='6753481' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,zombiehard,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,volcanosurvival,anubiseasy,anubisnormal,anubishard,zombietowereasy,zombietowernormal,zombietowerhard,icebreakereasy,icebreakernormal,icebreakerhard,anubiseasy2,anubisnormal2,anubishard2,chernobyleasy,chernobylnormal,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='раджаб454' experience='2146' money='876' gained_crown_money='0' no_crown_rewards='1' sponsor_points='1267' clan_points='99' bonus_experience='1565' bonus_money='638' bonus_sponsor_points='924' experience_boost='1148' money_boost='415' sponsor_points_boost='499' experience_boost_percent='1.15' money_boost_percent='0.9' sponsor_points_boost_percent='0.65' completed_stages='0' is_vip='1' score='3325' first_win='1' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='23428226' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,volcanosurvival,anubiseasy,anubisnormal,anubishard,zombietowereasy,zombietowernormal,zombietowerhard,icebreakereasy,icebreakernormal,icebreakerhard,anubiseasy2,anubisnormal2,chernobyleasy,chernobylnormal,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='Дж3нтельмен' experience='2257' money='921' gained_crown_money='0' no_crown_rewards='1' sponsor_points='0' clan_points='105' bonus_experience='1565' bonus_money='638' bonus_sponsor_points='924' experience_boost='1207' money_boost='436' sponsor_points_boost='0' experience_boost_percent='1.15' money_boost_percent='0.9' sponsor_points_boost_percent='0.65' completed_stages='0' is_vip='1' score='4925' first_win='1' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='19538383' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,zombiehard,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,volcanosurvival,anubiseasy,anubisnormal,anubishard,zombietowereasy,zombietowernormal,zombietowerhard,icebreakereasy,icebreakernormal,icebreakerhard,anubiseasy2,anubisnormal2,anubishard2,chernobyleasy,chernobylnormal,chernobylhard,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='Камано' experience='2257' money='921' gained_crown_money='0' no_crown_rewards='1' sponsor_points='1333' clan_points='105' bonus_experience='1565' bonus_money='638' bonus_sponsor_points='924' experience_boost='1207' money_boost='436' sponsor_points_boost='525' experience_boost_percent='1.15' money_boost_percent='0.9' sponsor_points_boost_percent='0.65' completed_stages='0' is_vip='1' score='4950' first_win='1' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='18988567' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,volcanosurvival,anubiseasy,anubisnormal,anubishard,zombietowereasy,zombietowernormal,zombietowerhard,icebreakereasy,icebreakernormal,anubiseasy2,anubisnormal2,chernobyleasy,chernobylnormal,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result><player_result nickname='Рыба2355.' experience='375' money='174' gained_crown_money='0' no_crown_rewards='1' sponsor_points='289' clan_points='32' bonus_experience='0' bonus_money='0' bonus_sponsor_points='0' experience_boost='49' money_boost='23' sponsor_points_boost='38' experience_boost_percent='0.15' money_boost_percent='0.15' sponsor_points_boost_percent='0.15' completed_stages='0' is_vip='0' score='5050' first_win='0' dynamic_multipliers_info='' dynamic_crown_multiplier='1'><profile_progression_update profile_id='23249801' mission_unlocked='none,trainingmission,easymission,normalmission,hardmission,survivalmission,zombieeasy,zombienormal,campaignsections,campaignsection1,campaignsection2,campaignsection3,volcanoeasy,volcanonormal,volcanohard,anubiseasy,anubisnormal,anubishard,zombietowereasy,zombietowernormal,icebreakereasy,icebreakernormal,anubiseasy2,anubisnormal2,chernobyleasy,chernobylnormal,chernobylhard,japaneasy,japannormal,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29'></profile_progression_update></player_result></broadcast_session_result>");

            yield return new[] {node2};
        }

        public static IEnumerable<object[]> GetBroadcastSessionNodeAndExpectedObject()
        {
            var node1 = HtmlNode.CreateNode("<broadcast_session_result bcast_receivers='415943875@warface/GameClient,673064529@warface/GameClient,130954002@warface/GameClient,213601447@warface/GameClient,212517822@warface/GameClient,676695911@warface/GameClient,682734143@warface/GameClient,263831027@warface/GameClient,259942698@warface/GameClient,309279601@warface/GameClient,348234928@warface/GameClient,681133359@warface/GameClient,121665537@warface/GameClient,13872189@warface/GameClient,125480849@warface/GameClient,684172791@warface/GameClient'><player_result nickname='СумашедшийТруп' experience='864' money='351' gained_crown_money='0' no_crown_rewards='1' sponsor_points='510' clan_points='40' bonus_experience='1' bonus_money='2' bonus_sponsor_points='3' experience_boost='462' money_boost='166' sponsor_points_boost='201' experience_boost_percent='1.15' money_boost_percent='0.9' sponsor_points_boost_percent='0.65' completed_stages='0' is_vip='1' score='2145' first_win='0' dynamic_multipliers_info='' dynamic_crown_multiplier='1'></broadcast_session_result>");

            var expectedObject = new BroadcastSessionResult(new[]
            {
                new BroadcastSessionResult.PlayerResult("СумашедшийТруп", 864, 351, 0, true, 510, 40, 1, 2, 3, 462, 166, 201, 1.15, 0.9, 0.65, 0, true, 2145, false, "", 1, null),
            });

            yield return new object[] {node1, expectedObject};
        }

        #endregion
    }
}